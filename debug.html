<div id="status" style="padding:20px; font-family:monospace; color:white; background:#111;">
  Probando conexi√≥n...
</div>

<script>
  // --- TUS DATOS REALES ---
  const PROJECT_URL = 'https://ndkupidhlauzroduvech.supabase.co'; // Sin barra al final
  const ANON_KEY = 'PON_AQUI_LA_LLAVE_QUE_EMPIEZA_POR_eyJ...'; 

  const consoleDiv = document.getElementById('status');
  function log(msg, color='#0f0') { 
    consoleDiv.innerHTML += `<br><span style="color:${color}">${msg}</span>`; 
  }

  async function testConnection() {
    log(`1. Validando configuraci√≥n...`);
    
    if (!ANON_KEY.startsWith('eyJ')) {
      log(`‚ùå ERROR FATAL: La llave NO parece ser de Supabase. Debe empezar por 'eyJ'.`, 'red');
      return;
    }

    log(`2. Intentando conexi√≥n DIRECTA (Fetch)...`, 'yellow');

    try {
      // Petici√≥n directa REST (sin librer√≠a JS) para descartar errores de versi√≥n
      const response = await fetch(`${PROJECT_URL}/rest/v1/managed_channels?select=count`, {
        method: 'GET',
        headers: {
          'apikey': ANON_KEY,
          'Authorization': `Bearer ${ANON_KEY}`,
          'Content-Type': 'application/json'
        }
      });

      if (response.ok) {
        log(`‚úÖ ¬°√âXITO! Conexi√≥n establecida.`, '#4ade80');
        const data = await response.json();
        log(`   Respuesta del servidor: ${JSON.stringify(data)}`);
        log(`üëâ Si ves esto, tus credenciales son CORRECTAS. El problema anterior era c√≥mo abr√≠as el archivo.`);
      } else {
        log(`‚ùå Error del Servidor: ${response.status} ${response.statusText}`, 'red');
        const errorDetail = await response.text();
        log(`   Detalle: ${errorDetail}`, 'orange');
      }

    } catch (err) {
      log(`‚ùå FALLO DE RED (Failed to fetch)`, 'red');
      log(`   Causa probable: Est√°s abriendo el archivo localmente (file://) o no tienes internet.`, 'white');
      log(`   Error t√©cnico: ${err.message}`, 'gray');
    }
  }

  testConnection();
</script>
